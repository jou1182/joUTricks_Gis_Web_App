<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JoUTricks GIS Viewer โ v3</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Vendor libraries -->
  <script src="https://cdn.jsdelivr.net/npm/shpjs@latest/dist/shp.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/togeojson/0.16.0/togeojson.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@7/turf.min.js"></script>
  <script src="https://unpkg.com/topojson-client@3"></script>
  <script src="https://unpkg.com/shp-write@latest/shpwrite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/terraformer-wkt-parser/1.2.1/terraformer-wkt-parser.min.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="header">
    <div class="header-content">
      <img src="logo.png" alt="JoUTricks Logo" class="logo-img" />
      <h1>JoUTricks GIS Viewer <span class="badge">v3</span></h1>
      <div class="header-actions">
        <button id="saveSessionBtn" class="btn small">ุญูุธ ุงูุฌูุณุฉ</button>
        <button id="clearSessionBtn" class="btn small">ูุณุญ ุงูุฌูุณุฉ</button>
        <button id="logoutBtn" class="logout-icon" title="ุชุณุฌูู ุงูุฎุฑูุฌ">โ</button>
      </div>
    </div>
  </header>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <img src="logo.png" class="login-logo" />
        <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
      </div>
      <div class="modal-body">
        <form id="loginForm">
          <p>ุจูุงูุงุช ุงูุฏุฎูู: <strong>jou</strong> / <strong>tricks</strong></p>
          <div class="form-group"><input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required /></div>
          <div class="form-group"><input type="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" required /></div>
          <div id="loginError" class="error-message"></div>
          <button type="submit" class="btn-login">ุฏุฎูู</button>
        </form>
      </div>
    </div>
  </div>

  <!-- App -->
  <div id="appContainer" class="hidden">
    <div class="main-container">
      <aside class="sidebar">
        <section class="section">
          <h3>๐ ุฑูุน ุงูุจูุงูุงุช</h3>
          <div id="uploadArea" class="upload-area">
            <p>ุงุณุญุจ ูููุงุช <strong>GeoJSON / Shapefile(ZIP) / KML / KMZ / GPX / CSV / TopoJSON / WKT</strong> ููุง</p>
            <input id="fileInput" type="file"
              accept=".geojson,.json,.zip,.kml,.kmz,.gpx,.csv,.topojson,.wkt,.txt"
              style="display:none;" />
          </div>
          <div id="uploadStatus" class="upload-status"></div>
        </section>

        <section class="section">
          <h3>๐๏ธ ุงูุทุจูุงุช</h3>
          <div id="layersList" class="layers-list"></div>
        </section>

        <section class="section">
          <h3>๐ ุจุญุซ ูู ุงูุณูุงุช</h3>
          <div class="form-group"><input id="searchField" type="text" placeholder="ุงุณู ุงูุญูู (ูุซุงู: name)" /></div>
          <div class="form-group"><input id="searchValue" type="text" placeholder="ูููุฉ ุงูุจุญุซ (ูุซุงู: Riyadh)" /></div>
          <button id="searchBtn" class="btn">ุจุญุซ</button>
          <div id="searchStatus" class="upload-status"></div>
        </section>

        <section class="section">
          <h3>๐ค ุชุตุฏูุฑ</h3>
          <p class="small-text">ุงุฎุชุฑ ุทุจูุฉ ูู ุงููุงุฆูุฉ ุซู ุงุถุบุท ุฃุญุฏ ุงูุฃุฒุฑุงุฑ:</p>
          <button id="exportGeoJSONBtn" class="btn">ุชุตุฏูุฑ GeoJSON</button>
          <button id="exportShpBtn" class="btn">ุชุตุฏูุฑ Shapefile</button>
        </section>

        <section class="section">
          <h3>๐ ูุนูููุงุช ุงูุนูุตุฑ</h3>
          <div id="featureInfo" class="feature-info">
            <p class="empty-message">ุงููุฑ ุนูู ุนูุตุฑ ูุนุฑุถ ุจูุงูุงุชู</p>
          </div>
        </section>
      </aside>

      <main class="map-container">
        <div id="map" class="map"></div>
      </main>
    </div>
  </div>

  <!-- Style Editor Modal -->
 <div id="styleModal" class="modal hidden">
    <div class="modal-content small">
      <div class="modal-header">
        <h2>ุชุนุฏูู ุงูููุท</h2>
      </div>
      <div class="modal-body">
        <div class="grid">
          <label>ุงูููู: <input type="color" id="styleColor" value="#ff6b6b"></label>
          <label>ุณูุงูุฉ ุงูุฎุท: <input type="range" id="styleWeight" min="1" max="8" value="2"></label>
          <label>ุดูุงููุฉ ุงูุชุนุจุฆุฉ: <input type="range" id="styleFill" min="0" max="1" step="0.05" value="0.4"></label>
          <label>ุญุฌู ุงูููุงุท: <input type="range" id="styleRadius" min="3" max="20" value="6"></label>
          <label>ุดูู ุงูููุทุฉ:
            <select id="styleShape">
              <option value="circle">Circle</option>
              <option value="marker">Marker</option>
            </select>
          </label>
        </div>
        <div class="actions">
          <button id="styleApplyBtn" class="btn">ุชุทุจูู</button>
          <button id="styleCancelBtn" class="btn btn-secondary">ุฅุบูุงู</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
